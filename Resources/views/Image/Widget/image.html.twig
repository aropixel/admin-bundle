{% if form is defined and form.crops is defined %}
{% form_theme form.crops '@AropixelAdmin/Form/layout.html.twig' %}
{% endif %}

{% set prototype_new %}{{ include('@AropixelAdmin/Image/Widget/new.html.twig') }}{% endset %}
<div class="image-widget">
    <div class="thumbnail"
         data-im-attach-path="{{ path('image_attach') }}"
         data-im-attach-class="{{ form.vars.attach_class }}"
         data-im-attach-value="{{ form.vars.attach_value is defined and form.vars.attach_value ? form.vars.attach_value : '' }}"
         data-im-attach-id="{{ form.vars.data is defined and form.vars.data and form.vars.data.id is defined ? form.vars.data.id : '' }}"
         data-im-crop-path="{{ form.vars.image_path is defined and form.vars.image_path ? form.vars.image_path | imagine_filter('admin_crop') : '' }}"

        {% if form.vars.attach_value is defined and form.vars.attach_value %}

         data-im-crops-slugs="{{ form.vars.crops is defined and form.vars.crops ? form.vars.crops|keys|join(';') : '' }}"
         data-im-crops-labels="{{ form.vars.crops is defined and form.vars.crops ? form.vars.crops|join(';') : '' }}"

        {% else %}

         data-im-image-id="{{ form.vars.data is defined and form.vars.data and form.vars.data.image ? form.vars.data.image.id : '' }}"

    {% endif %}
    {% if thumbnailAttr is defined %}{% for name,value in thumbnailAttr %}{{name}}="{{value}}"{% endfor %}{% endif %} >
        <div class="thumb">

            {{ include('@AropixelAdmin/Image/Widget/_preview.html.twig') }}
            {{ include('@AropixelAdmin/Image/Widget/_caption.html.twig') }}


        </div>
    {#        {% if form.vars.card_footer %}#}
    {#            {{ include('@AropixelAdmin/Image/Widget/_footer.html.twig') }}#}
    {#        {% endif %}#}
    </div>
    <div class="image-properties d-flex">

        <div>
            <h2 class="section-title">Image Ã  la une</h2>
            <div class="section-lead mb-4">{{ description is defined and description|length ? description : 'Choisissez une image' }}</div>

            <div class="form-group mb-1">
                <label class="col-form-label flex-grow-1">Texte alternatif</label>
                <div class="form-widget">
                    <input type="text" value="" placeholder="" class="form-control" />
                </div>
            </div>

        </div>

        <div class="image-actions">
            <a class="btn btn-sm btn-icon btn-light-primary me-3 btnUpload" data-bs-toggle="modal" data-bs-target="#modalLibrary" title="Choisir une image"><i class="far fa-image"></i></a>

            {% if form.crops is defined and get_available_crop_filters(form.vars.data)|length > 0 %}
                <a class="btn btn-sm btn-icon btn-light-primary me-3 iconCrop" data-bs-toggle="modal" data-bs-target="#modalCrop{{ form.vars.data.getImageUid() }}" title="Recadrer l'image"><i class="fas fa-crop-alt"></i></a>
            {% endif %}

            {% if form.vars.data and form.vars.data.image is defined and form.vars.data.image %}
                <a class="btn btn-sm btn-icon btn-light-danger me-3 btnUnlink" title="Retirer l'image"><i class="fas fa-unlink"></i></a>
            {% endif %}
        </div>

    </div>
</div>

